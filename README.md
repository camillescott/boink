
[![Build Status](https://travis-ci.org/camillescott/goetia.svg?branch=master)](https://travis-ci.org/camillescott/goetia)
[![install with bioconda](https://img.shields.io/badge/install%20with-bioconda-brightgreen.svg?style=flat)](http://bioconda.github.io/recipes/goetia/README.html)
[![Binder](https://mybinder.org/badge_logo.svg)](https://mybinder.org/v2/gh/camillescott/goetia/master?filepath=examples%2FStreaming%20Sourmash%20Demo.ipynb)

---

<div align="center">
<img src="docs/img/goetia_logo_v2.png" alt="logo" width="400" height="400">
</div>

---
    
goetia is a c++ library and software package for streaming analysis for de Bruijn Graphs, de Bruijn
graph compaction, and genome sketching. The c++ library is fully available through Python via
bindings generated by [cppyy](https://cppyy.readthedocs.io/en/latest/). The primary goals of
goetia and its algorithms are:

- Analyse data completely on-line with streaming methods,
- Use as little of the data as possible.

This library is a work-in-progress and under rapid development. Some current usage examples can be found in the `examples/` directory
and a launched with binder using the badge above.

## Installation

### Conda

[conda](https://docs.conda.io/en/latest/miniconda.html) is the supported installation environment. Within a conda
environment, install with:

    conda install goetia

This will install the goetia python package, the `libgoetia` shared library,
and its headers into `$CONDA_PREFIX`. With the environment activated, you can `import goetia`
in Python or link against the C++ library with `-lgoetia`.

### Building from Source


To build and install from source, first clone the repo:

    git clone https://github.com/camillescott/goetia && cd goetia

Then create a conda environment:

    conda create -y -n goetia -c conda-forge python=3 cppyy cmake cxx-compiler c-compiler clangdev libcxx libstdcxx-ng libgcc-ng pytest numpy scipy openmp python-clang screed blessings pytest-benchmark pyfiglet py-cpuinfo sourmash curio
    conda activate goetia
    pip install -r requirements.txt # there are a few things not updated on conda yet...

Then build and install with cmake:

    mkdir build; cd build
    cmake ..
    make # optionally use -j N for faster/parallel build
    make install
